<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .warning-message {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>Sign up</h1>
    <form>
      <div>
        <label for="username">username: </label>
        <input type="text" id="username" />
      </div>

      <div>
        <label for="password1">password: </label>
        <input type="password" id="password1" />
        <span id="warning1" class="warning-message"></span>
      </div>

      <div>
        <label for="password2">password confirmation: </label>
        <input type="password" id="password2" />
        <span id="warning2" class="warning-message"></span>
      </div>
      <!-- 버튼에는 submit 타입이 자동으로 달려있기 때문에 버튼을 누르면 submit이 됨.
      submit 되면 페이지가 새로고침 됨. 
      타입을 submit으로 하고서도 이벤트를 막고 싶다면 e.preventDefault() 를 넣어줘야 함.-->
      <button type="button">Signup</button>
    </form>

    <script>
      // 쿼리 셀렉터
      const pw1 = document.querySelector("#password1");
      const pw2 = document.querySelector("#password2");
      const warn1 = document.querySelector("#warning1");
      const warn2 = document.querySelector("#warning2");
      const button = document.querySelector("button");

      // 함수 선언
      const warnLen = () =>
        (warn1.innerText = "비밀번호는 8자 이상이어야 합니다.");
      const clearLen = () => (warn1.innerText = "");
      const warnIsSame = () =>
        (warn2.innerText = "비밀번호가 일치하지 않습니다.");
      const clearIsSame = () => (warn2.innerText = "");

      const ckPassword = (e) => {
        // 8자 넘는지 체크
        if (pw1.value.length < 8) warnLen();
        else clearLen();

        // 두 비밀번호 같은지 체크
        if (pw1.value !== pw2.value) warnIsSame();
        else clearIsSame();

        // 만약 button의 타입이 submit이라면
        e.preventDefault();
        // 을 넣어줘야 함.
      };

      // addEventListener
      button.addEventListener("click", ckPassword);
      /* 
      회원가입시, 서버에 데이터가 전송되기 전에 js로 비밀번호의 유효성 검사를 진행하고자 한다.
      아래의 조건을 만족하지 않으면, 에러메시지를 화면에 출력하도록 코드를 완성하시오.
      1. password1이 8자를 넘지 않으면 span#warning1 에 '비밀번호는 8자 이상이어야 합니다.' 라는 에러메시지 출력
      2. password2가 password1과 같지 않으면 '비밀번호가 일치하지 않습니다.' 라는 에러메시지 출력
      3. 문제가 없을시 에러메시지 삭제
    */
    </script>
  </body>
</html>
